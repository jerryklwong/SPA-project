<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 å»£æ±æ–°æ˜¥å¤§å†’éšª | Family Trip</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js for Budget -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts: Zen Maru Gothic (Japanese Rounded Style) -->
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&display=swap" rel="stylesheet">

    <!-- Custom Styles for Anime/Manga Look -->
    <style>
        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background-color: #FFFDF5;
            background-image: radial-gradient(#E5E7EB 1px, transparent 1px);
            background-size: 20px 20px;
            overflow: hidden;
        }

        #app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        #top-nav {
            flex: 0 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 4px solid #84A98C;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            z-index: 50;
            padding: 10px 0;
        }

        #content-area {
            flex: 1 1 auto;
            overflow-y: auto;
            padding: 20px;
            scroll-behavior: smooth;
        }

        .manga-card {
            background: white;
            border: 3px solid #374151;
            border-radius: 16px;
            box-shadow: 8px 8px 0px rgba(132, 169, 140, 0.4);
            transition: transform 0.2s;
            overflow: hidden;
            position: relative;
        }
        .manga-card:hover {
            transform: translateY(-2px);
        }

        .action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 70px;
            height: 100%;
            color: #9CA3AF;
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            background-color: #FAFAFA;
        }
        .action-btn:hover {
            color: #EC4899;
            background-color: #FDF2F8;
        }
        .action-btn .icon-circle {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 2px solid #D1D5DB;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 4px;
            background: white;
            transition: border-color 0.3s;
        }
        .action-btn:hover .icon-circle {
            border-color: #EC4899;
            background: white;
        }

        .nav-btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
        }
        .nav-btn.active {
            background-color: #FFB7B2;
            color: white;
            border: 2px solid #FF6F61;
            transform: scale(1.05);
            box-shadow: 0 4px 6px rgba(255, 111, 97, 0.3);
        }
        .nav-btn:hover:not(.active) {
            background-color: #F0FDF4;
            color: #2F855A;
        }

        #content-area::-webkit-scrollbar { width: 8px; }
        #content-area::-webkit-scrollbar-track { background: #f1f1f1; }
        #content-area::-webkit-scrollbar-thumb { background: #84A98C; border-radius: 4px; }

        .speech-bubble {
            position: relative;
            background: #E0F2FE;
            border-radius: .4em;
            padding: 10px;
        }
        .speech-bubble:after {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            width: 0;
            height: 0;
            border: 10px solid transparent;
            border-right-color: #E0F2FE;
            border-left: 0;
            margin-top: -10px;
            margin-left: -10px;
        }
    </style>
</head>
<body>

<div id="app-container">
    
    <!-- UPPER ROW: Navigation -->
    <header id="top-nav">
        <div class="max-w-7xl mx-auto px-2">
            <div class="flex items-center justify-between mb-2 px-2">
                <div class="flex items-center gap-2">
                    <div class="bg-yellow-400 text-white p-2 rounded-full border-2 border-gray-700">
                        <i class="fa-solid fa-car"></i>
                    </div>
                    <h1 class="text-xl md:text-2xl font-black text-gray-700 tracking-wider">å»£æ±è‡ªé§•ãƒ»ç²¾æ˜éŠ</h1>
                </div>
                <div class="text-xs md:text-sm font-bold text-gray-500 bg-gray-100 px-3 py-1 rounded-full">
                    <i class="fa-solid fa-user-group"></i> 1è»Š5äºº | é«˜CPå€¼
                </div>
            </div>

            <div class="flex space-x-3 overflow-x-auto pb-2 px-2 no-scrollbar" style="scrollbar-width: none;">
                <button onclick="renderDay(0)" id="btn-0" class="nav-btn active flex-shrink-0 px-4 py-2 rounded-xl text-sm md:text-base font-bold text-gray-600 bg-white shadow-sm border border-gray-200">
                    <div class="text-xs opacity-70">1æœˆ14æ—¥</div>
                    <div>ç¬¬ä¸€å¤©</div>
                </button>
                <button onclick="renderDay(1)" id="btn-1" class="nav-btn flex-shrink-0 px-4 py-2 rounded-xl text-sm md:text-base font-bold text-gray-600 bg-white shadow-sm border border-gray-200">
                    <div class="text-xs opacity-70">1æœˆ15æ—¥</div>
                    <div>ç¬¬äºŒå¤©</div>
                </button>
                <button onclick="renderDay(2)" id="btn-2" class="nav-btn flex-shrink-0 px-4 py-2 rounded-xl text-sm md:text-base font-bold text-gray-600 bg-white shadow-sm border border-gray-200">
                    <div class="text-xs opacity-70">1æœˆ16æ—¥</div>
                    <div>ç¬¬ä¸‰å¤©</div>
                </button>
                <button onclick="renderDay(3)" id="btn-3" class="nav-btn flex-shrink-0 px-4 py-2 rounded-xl text-sm md:text-base font-bold text-gray-600 bg-white shadow-sm border border-gray-200">
                    <div class="text-xs opacity-70">1æœˆ17æ—¥</div>
                    <div class="text-purple-600">é›†åˆæ—¥</div>
                </button>
                <button onclick="renderDay(4)" id="btn-4" class="nav-btn flex-shrink-0 px-4 py-2 rounded-xl text-sm md:text-base font-bold text-gray-600 bg-white shadow-sm border border-gray-200">
                    <div class="text-xs opacity-70">1æœˆ18æ—¥</div>
                    <div>å›ç¨‹</div>
                </button>
                <button onclick="renderBudget()" id="btn-budget" class="nav-btn flex-shrink-0 px-4 py-2 rounded-xl text-sm md:text-base font-bold text-gray-600 bg-white shadow-sm border border-gray-200">
                    <div class="text-xs opacity-70">Updated</div>
                    <div>æ–°é ç®—</div>
                </button>
            </div>
        </div>
    </header>

    <!-- LOWER ROW: Content -->
    <main id="content-area">
        <div id="main-content" class="max-w-4xl mx-auto space-y-6">
            <!-- Content Injected Here -->
        </div>
    </main>
</div>

<script>
    // --- Trip Data (Updated for 1 Car & Budget Hotels) ---
    const tripData = [
        {
            date: "1æœˆ14æ—¥ (é€±ä¸‰)",
            dayNum: "ç¬¬ä¸€ç« ï¼šä¸‰äººå°éšŠå‡ºç™¼",
            location: "é¦™æ¸¯ â” ç æµ·",
            weather: "æ™´æœ— 18Â°C",
            characters: ["çˆ¸çˆ¸", "åª½åª½", "BB"],
            highlight: "é«˜æ€§åƒ¹æ¯”ãƒ»ä¹¾æ·¨èˆ’é©",
            story: "æˆ‘å€‘ä¸€å®¶ä¸‰å£ä¸€è»Šå‡ºç™¼ï¼é€™æ¬¡é¸é…’åº—çš„åŸå‰‡æ˜¯ï¼šä¹¾æ·¨ã€æ–°æ·¨ã€ç¶²ç´…æ¨è–¦ï¼Œä¸è¿½æ±‚å¥¢è¯ï¼Œä½†è¦ä½å¾—å®‰å¿ƒã€‚",
            timeline: [
                { 
                    time: "09:00", 
                    icon: "fa-car-side", 
                    title: "ä¸€è»Šå‡ºç™¼", 
                    desc: "è¡Œæç®±æ•´ç†å¥½ï¼Œå¬°å…’è»Šæ”¾å¥½ã€‚ä¸€å°è»Šéæ©‹ï¼Œè²»ç”¨æ›´çœï¼Œæ©Ÿå‹•æ€§æ›´é«˜ï¼", 
                    sourceUrl: "https://www.hzmb.gov.hk/tc/", 
                    linkIcon: "fa-road", 
                    linkText: "å¤§æ©‹é€š" 
                },
                { 
                    time: "12:00", 
                    icon: "fa-utensils", 
                    title: "æ©«ç´åˆé¤", 
                    desc: "åœ¨å¤§çœ¾é»è©•æ‰¾äº†ä¸€å®¶è©•åˆ†é«˜çš„é †å¾·èœé¤¨ï¼Œæ€§åƒ¹æ¯”é«˜ï¼Œç’°å¢ƒä¹¾æ·¨ã€‚", 
                    sourceUrl: "https://m.dianping.com/zhuhai/ch10/r16625", 
                    linkIcon: "fa-bowl-rice", 
                    linkText: "è¦“é£Ÿ" 
                },
                { 
                    time: "14:30", 
                    icon: "fa-leaf", 
                    title: "èŠ’æ´²æ¿•åœ°å…¬åœ’", 
                    desc: "å…è²»åˆå¥½ç©çš„æ”¾é›»é»ï¼è‰åœ°å¾ˆå¤§ï¼ŒBB å¯ä»¥ç›¡æƒ…çˆ¬è¡Œï¼Œä¸ç”¨äººæ“ äººã€‚", 
                    sourceUrl: "https://hk.trip.com/travel-guide/attraction/zhuhai/mangzhou-wetland-park-56645396/", 
                    linkIcon: "fa-tree", 
                    linkText: "å…¬åœ’" 
                },
                { 
                    time: "17:30", 
                    icon: "fa-bed", 
                    title: "å…¥ä½ï¼šäºæœµ/å¸Œçˆ¾é “æ­¡æœ‹", 
                    desc: "ã€é«˜CPå€¼æ¨è–¦ã€‘å…¥ä½æ©«ç´çš„å“ç‰Œé€£é–é…’åº—ã€‚è¨­æ–½æ–°ï¼Œæœå‹™å¥½ï¼ˆæœ‰ç†±èŒ¶/å®µå¤œï¼‰ï¼Œæˆ¿é–“ä¹¾æ·¨è¡›ç”Ÿï¼Œæ¯”åº¦å‡æ‘ä¾¿å®œä¸€åŠï¼", 
                    sourceUrl: "https://hk.trip.com/hotels/list?city=31&starDep=4&sort=comment_desc", 
                    linkIcon: "fa-check-double", 
                    linkText: "çœ‹è©•åˆ†" 
                }
            ],
            tip: "é€£é–å•†å‹™é…’åº—çš„éš”éŸ³å’Œè¡›ç”Ÿé€šå¸¸æ¯”è€ç‰Œäº”æ˜Ÿç´šæ›´å¥½ï¼Œä¸”åƒ¹æ ¼è¦ªæ°‘ã€‚"
        },
        {
            date: "1æœˆ15æ—¥ (é€±å››)",
            dayNum: "ç¬¬äºŒç« ï¼šå°‹å‘³é †å¾·",
            location: "ç æµ· â” é †å¾·",
            weather: "å¤šé›² 17Â°C",
            characters: ["çˆ¸çˆ¸", "åª½åª½", "BB"],
            highlight: "ç¾é£Ÿä¹‹éƒ½ x æ¹–ç•”æ•£æ­¥",
            story: "å‰å¾€é †å¾·ï¼ä»Šå¤©é‡é»æ˜¯åƒå¾—å¥½ã€‚é–‹è»Šç´„ 1 å°æ™‚ï¼Œéå¸¸è¼•é¬†ã€‚",
            timeline: [
                { 
                    time: "10:30", 
                    icon: "fa-car", 
                    title: "å‰å¾€é †å¾·", 
                    desc: "BB åœ¨è»Šä¸Šè£œçœ ï¼Œæˆ‘å€‘äº«å—è»Šä¸Šçš„éŸ³æ¨‚æ™‚å…‰ã€‚", 
                    sourceUrl: "https://www.google.com/maps/dir/?api=1&destination=Shunde", 
                    linkIcon: "fa-route", 
                    linkText: "å°èˆª" 
                },
                { 
                    time: "12:30", 
                    icon: "fa-fish", 
                    title: "é †å¾·ç§æˆ¿èœ", 
                    desc: "å»å°ç´…æ›¸æ¨è–¦çš„ã€Œæ¡‘æ‹¿é­šã€æˆ–ã€Œæ‹†é­šç¾¹ã€é¤å»³ã€‚é¸æ“‡ç’°å¢ƒæ˜äº®ã€éå¸ç…™å€çš„é¤å»³ã€‚", 
                    sourceUrl: "https://www.xiaohongshu.com/explore", 
                    linkIcon: "fa-hashtag", 
                    linkText: "å°ç´…æ›¸" 
                },
                { 
                    time: "15:00", 
                    icon: "fa-wind", 
                    title: "é †å³°å±±å…¬åœ’", 
                    desc: "å…è²»æ™¯é»ä¸­çš„ç‹è€…ã€‚æ¹–é‚Šæ­¥é“éå¸¸å¹³å¦ï¼Œæ¨å¬°å…’è»Šä¸€æµï¼Œé©åˆé‡é¤ã€‚", 
                    sourceUrl: "https://you.ctrip.com/sight/foshan208/14079.html", 
                    linkIcon: "fa-image", 
                    linkText: "ç¾åœ–" 
                },
                { 
                    time: "18:00", 
                    icon: "fa-city", 
                    title: "å‰å¾€æ¸…é å¸‚å€", 
                    desc: "ç‚ºäº†ç¯€çœæˆæœ¬ä¸”ä½å¾—æ›´å¥½ï¼Œæˆ‘å€‘ä¸ä½æº«æ³‰å€ï¼Œæ”¹ä½æ¸…é å¸‚å€çš„å“ç‰Œé…’åº—ï¼ˆå¦‚é£›ä¾†æ¹–é‚Šçš„æ­¡æœ‹ï¼‰ã€‚", 
                    sourceUrl: "https://hk.trip.com/hotels/list?city=462&starDep=4", 
                    linkIcon: "fa-hotel", 
                    linkText: "å¸‚å€é…’åº—" 
                }
            ],
            tip: "ä½åœ¨å¸‚å€åƒé£¯é¸æ“‡å¤šï¼Œåƒ¹æ ¼ä¹Ÿæ¯”æ™¯å€ä¾¿å®œå¾ˆå¤šã€‚"
        },
        {
            date: "1æœˆ16æ—¥ (é€±äº”)",
            dayNum: "ç¬¬ä¸‰ç« ï¼šå…¬åœ’ç”Ÿæ´»",
            location: "æ¸…é å¸‚å€",
            weather: "å¾®æ¶¼ 15Â°C",
            characters: ["çˆ¸çˆ¸", "åª½åª½", "BB"],
            highlight: "å…¬åœ’æ¼«æ­¥ x è‡ªç”±æº«æ³‰",
            story: "ä»Šå¤©ä¸è¶•è¡Œç¨‹ã€‚ä½åœ¨å…¬åœ’æ—çš„å¥½è™•å°±æ˜¯éš¨æ™‚å¯ä»¥æ•£æ­¥ã€‚",
            timeline: [
                { 
                    time: "09:00", 
                    icon: "fa-sun", 
                    title: "é£›ä¾†æ¹–å…¬åœ’", 
                    desc: "é…’åº—æ¨“ä¸‹å°±æ˜¯å…¬åœ’ï¼ç©ºæ°£å¥½ï¼Œæœ‰å…’ç«¥éŠæ¨‚è¨­æ–½ï¼Œé©åˆ BB æ”¾é›»ã€‚", 
                    sourceUrl: "https://you.ctrip.com/sight/qingyuan462/141075.html", 
                    linkIcon: "fa-tree", 
                    linkText: "å…¬åœ’" 
                },
                { 
                    time: "12:00", 
                    icon: "fa-drumstick-bite", 
                    title: "æœ¬åœ°æ¸…é é›", 
                    desc: "å¸‚å€æœ‰å¾ˆå¤šè€å­—è™Ÿé›ç…²ï¼Œåƒ¹æ ¼å¯¦æƒ ï¼Œå‘³é“æ­£å®—ã€‚", 
                    sourceUrl: "https://m.dianping.com/qingyuan/ch10/g110", 
                    linkIcon: "fa-thumbs-up", 
                    linkText: "å¥½è©•åº—" 
                },
                { 
                    time: "15:00", 
                    icon: "fa-hot-tub-person", 
                    title: "å–®æ¬¡æº«æ³‰é«”é©—", 
                    desc: "å¦‚æœæƒ³æ³¡æº«æ³‰ï¼Œæˆ‘å€‘å¯ä»¥è²·ã€Œæ–°éŠ€ç›ã€æˆ–å‘¨é‚Šçš„æº«æ³‰å–®æ¬¡ç¥¨ï¼Œæ¯”ä½åº¦å‡æ‘åˆ’ç®—å¾ˆå¤šï¼", 
                    sourceUrl: "https://piao.ctrip.com/ticket/dest/t14081.html", 
                    linkIcon: "fa-ticket", 
                    linkText: "è¨‚ç¥¨" 
                },
                { 
                    time: "18:00", 
                    icon: "fa-bed", 
                    title: "å›é…’åº—ä¼‘æ¯", 
                    desc: "å›åˆ°æˆ‘å€‘ä¹¾æ·¨èˆ’é©çš„å¸‚å€é…’åº—ã€‚æº–å‚™æ˜å¤©æ¥å®¶äººã€‚", 
                    sourceUrl: null, 
                    linkIcon: "fa-moon", 
                    linkText: "ä¼‘æ¯" 
                }
            ],
            tip: "æº«æ³‰å–®æ¬¡ç¥¨é€šå¸¸åœ¨ç¶²ä¸Šè²·æœ‰å„ªæƒ ï¼Œè¨˜å¾—æå‰çœ‹ã€‚"
        },
        {
            date: "1æœˆ17æ—¥ (é€±å…­)",
            dayNum: "ç¬¬å››ç« ï¼šå…¨å“¡é›†åˆ",
            location: "æ¸…é é«˜éµç«™ â” æ‹œç¥­",
            weather: "æ™´æœ— 18Â°C",
            characters: ["å…¨å®¶5äºº"],
            highlight: "æ¥äºº x æ‹œç¥­ x åœ˜èš",
            story: "ä»Šå¤©è¦æ¥å§‘åª½å’Œè¡¨å“¥å•¦ï¼è»Šå­æ•´ç†ä¸€ä¸‹ï¼Œæº–å‚™åæ»¿ 5 å€‹äººã€‚",
            timeline: [
                { 
                    time: "09:30", 
                    icon: "fa-train", 
                    title: "é«˜éµç«™æ¥äºº", 
                    desc: "é–‹è»Šå»æ¸…é ç«™ã€‚5 äºº + è¡Œæå¯èƒ½æœ‰é»æ“ ï¼Œè¨˜å¾—å¾Œè»Šå»‚è¦æ•´ç†å¥½ç©ºé–“ã€‚", 
                    special: true, 
                    sourceUrl: "https://www.highspeed.mtr.com.hk/tc/main/index.html", 
                    linkIcon: "fa-clock", 
                    linkText: "æ™‚åˆ»è¡¨" 
                },
                { 
                    time: "11:00", 
                    icon: "fa-hands-praying", 
                    title: "æ‹œç¥­è¡Œç¨‹", 
                    desc: "å‰å¾€æ‹œç¥­åœ°é»ã€‚é ç•™ 2 å°æ™‚ã€‚é€™æ˜¯å®¶æ—çš„é‡è¦æ™‚åˆ»ã€‚", 
                    special: true, 
                    sourceUrl: null, 
                    linkIcon: "fa-location-dot", 
                    linkText: "ä½ç½®" 
                },
                { 
                    time: "13:30", 
                    icon: "fa-users", 
                    title: "åœ˜åœ“åˆé¤", 
                    desc: "5 å€‹äººçµ‚æ–¼èšé½Šï¼æ‰¾ä¸€å®¶å¤§åœ“æ¡Œçš„è¾²èŠï¼Œç†±ç†±é¬§é¬§åƒä¸€é “ã€‚", 
                    sourceUrl: "https://you.ctrip.com/restaurant/qingyuan462.html", 
                    linkIcon: "fa-utensils", 
                    linkText: "è¾²å®¶æ¨‚" 
                },
                { 
                    time: "16:00", 
                    icon: "fa-gamepad", 
                    title: "å“¥å“¥çš„æ”¾é›»æ™‚é–“", 
                    desc: "å¸¶ 11 æ­²è¡¨å“¥å»æœ‰å¡ä¸è»Š/å°„ç®­çš„åœ°æ–¹ç©ï¼ŒBB å°±åœ¨æ—é‚Šè‰åœ°çœ‹å“¥å“¥ç©ã€‚", 
                    sourceUrl: "https://hk.trip.com/moments/search/%E6%B8%85%E9%81%A0%E5%8D%A1%E4%B8%81%E8%BB%8A", 
                    linkIcon: "fa-flag", 
                    linkText: "æ”»ç•¥" 
                }
            ],
            tip: "5 äººåŒè»Šï¼Œå¾Œåº§å¦‚æœæ”¾äº†å®‰å…¨åº§æ¤…æœƒæ¯”è¼ƒæ“ ï¼Œå»ºè­°è»Šç¨‹ä¸­å¤šåœä¼‘æ¯ç«™ã€‚"
        },
        {
            date: "1æœˆ18æ—¥ (é€±æ—¥)",
            dayNum: "çµ‚ç« ï¼šæ»¿è¼‰è€Œæ­¸",
            location: "æ¸…é  â” é¦™æ¸¯",
            weather: "å¤šé›² 16Â°C",
            characters: ["å…¨å®¶5äºº"],
            highlight: "è²·æ‰‹ä¿¡ x å›å®¶",
            story: "æ—…ç¨‹æœ€å¾Œä¸€å¤©ï¼Œåƒå€‹æ‚ é–’æ—©é¤ï¼Œè²·é»ç‰¹ç”¢å›å®¶ã€‚",
            timeline: [
                { 
                    time: "09:30", 
                    icon: "fa-coffee", 
                    title: "é…’åº—æ—©é¤", 
                    desc: "æ­¡æœ‹/äºæœµçš„æ—©é¤é€šå¸¸å¾ˆè±å¯Œï¼Œä¸­è¥¿å¼éƒ½æœ‰ï¼Œé©åˆè€äººå°å­©ã€‚", 
                    sourceUrl: null, 
                    linkIcon: "fa-mug-hot", 
                    linkText: "æ—©é¤" 
                },
                { 
                    time: "11:00", 
                    icon: "fa-bag-shopping", 
                    title: "æœ€å¾Œæ¡è³¼", 
                    desc: "å»ç•¶åœ°å¸‚å ´æˆ–è¶…å¸‚è²·æ¸…é é›(çœŸç©ºåŒ…è£)ã€è‹±å¾·ç´…èŒ¶ã€‚", 
                    sourceUrl: "https://you.ctrip.com/shopping/qingyuan462.html", 
                    linkIcon: "fa-basket-shopping", 
                    linkText: "ç‰¹ç”¢" 
                },
                { 
                    time: "13:00", 
                    icon: "fa-road", 
                    title: "å•Ÿç¨‹å›æ¸¯", 
                    desc: "5 äººæ»¿è¼‰è€Œæ­¸ã€‚é è¨ˆè»Šç¨‹è¼ƒé•·ï¼Œæ³¨æ„è¡Œè»Šå®‰å…¨ã€‚", 
                    sourceUrl: "https://www.bayarea.gov.hk/tc/connect/driving.html", 
                    linkIcon: "fa-car", 
                    linkText: "è·¯æ³" 
                }
            ],
            tip: "å›ç¨‹è¡Œæå¤šï¼Œç¢ºä¿å¾Œæ–¹è¦–é‡ä¸è¢«é®æ“‹ã€‚"
        }
    ];

    const contentArea = document.getElementById('main-content');
    const buttons = document.querySelectorAll('.nav-btn');

    function setActiveButton(index) {
        buttons.forEach(btn => btn.classList.remove('active'));
        if (index === 'budget') {
            document.getElementById('btn-budget').classList.add('active');
        } else {
            document.getElementById(`btn-${index}`).classList.add('active');
        }
    }

    function renderDay(index) {
        setActiveButton(index);
        const day = tripData[index];
        
        let charHTML = day.characters.map(char => {
            let color = 'bg-gray-200';
            let icon = 'fa-user';
            if (char.includes('BB')) { color = 'bg-pink-200 text-pink-600'; icon = 'fa-baby'; }
            else if (char.includes('å…¨å®¶')) { color = 'bg-purple-200 text-purple-600'; icon = 'fa-users'; }
            else if (char.includes('çˆ¸')) { color = 'bg-green-200 text-green-600'; icon = 'fa-user-tie'; }
            else if (char.includes('åª½')) { color = 'bg-yellow-200 text-yellow-600'; icon = 'fa-person-dress'; }
            
            return `<span class="inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-bold ${color}">
                <i class="fa-solid ${icon}"></i> ${char}
            </span>`;
        }).join(' ');

        let timelineHTML = day.timeline.map((item, idx) => {
            const isSpecial = item.special ? 'border-l-4 border-red-400 bg-red-50' : 'border-l-4 border-blue-200';
            const linkHtml = item.sourceUrl ? `
                <div class="border-l-2 border-dashed border-gray-200 ml-4 pl-2 flex flex-col justify-center">
                    <a href="${item.sourceUrl}" target="_blank" class="action-btn group" title="æŸ¥çœ‹è©³æƒ…">
                        <div class="icon-circle shadow-sm">
                            <i class="fa-solid ${item.linkIcon} text-lg text-gray-400 group-hover:text-pink-500 transition-colors"></i>
                        </div>
                        <span class="text-xs font-bold text-gray-400 group-hover:text-pink-500 transition-colors">${item.linkText}</span>
                    </a>
                </div>
            ` : `
                <div class="border-l-2 border-dashed border-gray-200 ml-4 pl-2 flex flex-col justify-center opacity-30 cursor-default">
                    <div class="action-btn">
                        <div class="icon-circle">
                            <i class="fa-solid ${item.linkIcon} text-lg"></i>
                        </div>
                        <span class="text-xs font-bold">${item.linkText}</span>
                    </div>
                </div>
            `;

            return `
            <div class="relative pl-8 pb-8 group">
                <div class="absolute left-[11px] top-8 bottom-0 w-0.5 bg-gray-200 group-last:hidden"></div>
                <div class="absolute left-0 top-0 w-6 h-6 rounded-full bg-white border-2 border-gray-400 flex items-center justify-center z-10 text-xs text-gray-500">${idx + 1}</div>
                <div class="manga-card ${isSpecial} flex flex-row p-4 min-h-[120px]">
                    <div class="flex-1 flex flex-col justify-between">
                        <div>
                            <div class="flex justify-between items-start mb-1">
                                <span class="font-black text-xl text-gray-700 font-mono">${item.time}</span>
                            </div>
                            <h4 class="font-bold text-lg text-gray-800 mb-1 flex items-center gap-2">
                                ${item.title}
                                ${item.special ? '<i class="fa-solid fa-star text-red-500 text-xs animate-pulse"></i>' : ''}
                            </h4>
                            <p class="text-gray-600 text-sm leading-relaxed">${item.desc}</p>
                        </div>
                        ${item.special ? '<div class="mt-2 text-xs font-bold text-red-500 bg-red-100 p-1 rounded inline-block w-fit"><i class="fa-solid fa-triangle-exclamation"></i> é‡é»è¡Œç¨‹</div>' : ''}
                    </div>
                    ${linkHtml}
                </div>
            </div>`;
        }).join('');

        const html = `
            <div class="manga-card bg-white p-0 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-400 via-pink-400 to-green-400"></div>
                <div class="p-6">
                    <div class="flex justify-between items-start">
                        <div>
                            <h2 class="text-3xl md:text-4xl font-black text-gray-800 mb-2">${day.dayNum}</h2>
                            <div class="text-lg font-bold text-gray-500 mb-4 flex items-center gap-2">
                                <i class="fa-solid fa-location-dot text-red-400"></i> ${day.location} 
                                <span class="text-gray-300">|</span> 
                                <i class="fa-solid fa-cloud text-blue-400"></i> ${day.weather}
                            </div>
                        </div>
                        <div class="hidden md:block bg-gray-800 text-white p-4 rounded-xl text-center shadow-lg transform rotate-3">
                            <div class="text-xs uppercase tracking-widest text-gray-400">JAN</div>
                            <div class="text-3xl font-black">${day.date.split('æœˆ')[1].split('æ—¥')[0]}</div>
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-2 mb-6">${charHTML}</div>
                    <div class="flex gap-4 items-start">
                        <div class="w-12 h-12 rounded-full bg-gray-200 border-2 border-gray-400 flex-shrink-0 overflow-hidden">
                             <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix&backgroundColor=b6e3f4" alt="Narrator" />
                        </div>
                        <div class="speech-bubble flex-1 text-gray-700 font-medium">${day.story}</div>
                    </div>
                </div>
            </div>
            <div class="mt-8 px-2">
                <h3 class="text-xl font-bold text-gray-800 mb-6 pl-2 border-l-4 border-green-500">è¡Œç¨‹æ™‚é–“è»¸</h3>
                ${timelineHTML}
            </div>
            <div class="bg-yellow-100 border-2 border-yellow-400 rounded-xl p-4 flex gap-3 items-center shadow-sm">
                <i class="fa-solid fa-lightbulb text-yellow-600 text-xl"></i>
                <p class="text-yellow-800 text-sm font-bold">å°è²¼å£«ï¼š${day.tip}</p>
            </div>
            <div class="h-10"></div>
        `;
        contentArea.innerHTML = html;
        contentArea.scrollTop = 0;
    }

    function renderBudget() {
        setActiveButton('budget');
        const html = `
            <div class="manga-card p-6 bg-white">
                <h2 class="text-3xl font-black text-gray-800 mb-2">ğŸ’° æ…³éŒ¢æ”»ç•¥ (æ›´æ–°ç‰ˆ)</h2>
                <p class="text-gray-500 mb-6">å–®è»Šå‡ºè¡Œ + é«˜CPå€¼é…’åº— = é ç®—æ¸›åŠï¼</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                    <div class="relative h-64 w-full">
                        <canvas id="budgetChart"></canvas>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="bg-green-50 p-4 rounded-xl border border-green-100">
                            <div class="text-sm text-gray-500">ç¸½é ç®— (æ¸¯å¹£)</div>
                            <div class="text-3xl font-black text-green-600">~$7,800</div>
                            <div class="text-xs text-green-500 mt-1">æ¯”åŸè¨ˆåŠƒç¯€çœç´„ $4,700!</div>
                        </div>
                        <ul class="space-y-2 text-sm text-gray-600">
                            <li class="flex justify-between border-b border-gray-100 pb-1">
                                <span><i class="fa-solid fa-bed text-purple-400 w-6"></i> é…’åº— (4æ™š, å“ç‰Œé€£é–)</span>
                                <span class="font-bold">$3,200</span>
                            </li>
                            <li class="flex justify-between border-b border-gray-100 pb-1">
                                <span><i class="fa-solid fa-utensils text-orange-400 w-6"></i> é¤é£²ç¾é£Ÿ</span>
                                <span class="font-bold">$2,500</span>
                            </li>
                            <li class="flex justify-between border-b border-gray-100 pb-1">
                                <span><i class="fa-solid fa-gas-pump text-red-400 w-6"></i> æ²¹è²» & éè·¯è²» (1è»Š)</span>
                                <span class="font-bold">$1,200</span>
                            </li>
                            <li class="flex justify-between border-b border-gray-100 pb-1">
                                <span><i class="fa-solid fa-ticket text-blue-400 w-6"></i> é–€ç¥¨ & é›œé …</span>
                                <span class="font-bold">$900</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="mt-8 bg-blue-50 p-4 rounded-xl border-2 border-blue-200 border-dashed text-center">
                    <p class="text-blue-800 font-bold">ç‚ºä»€éº¼é¸æ“‡äºæœµ/å¸Œçˆ¾é “æ­¡æœ‹ï¼Ÿ</p>
                    <p class="text-sm text-blue-700 mt-2 text-left">
                    1. <span class="font-bold">è¡›ç”Ÿä¿è­‰ï¼š</span> ç¤¾äº¤åª’é«”ä¸€è‡´å¥½è©•çš„æ¸…æ½”åº¦ (Clean is enough!)ã€‚<br>
                    2. <span class="font-bold">æ€§åƒ¹æ¯”é«˜ï¼š</span> åƒ¹æ ¼æ˜¯åº¦å‡æ‘çš„ä¸€åŠï¼Œä½†æœå‹™æ›´è²¼å¿ƒã€‚<br>
                    3. <span class="font-bold">è¨­æ–½æ–°ï¼š</span> ç æµ·æ©«ç´å’Œæ¸…é é£›ä¾†æ¹–çš„åº—éƒ½å¾ˆæ–°ã€‚
                    </p>
                </div>
            </div>
            <div class="h-10"></div>
        `;
        contentArea.innerHTML = html;

        const ctx = document.getElementById('budgetChart').getContext('2d');
        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['é…’åº— (å“ç‰Œé€£é–)', 'é¤é£²', 'äº¤é€š (1è»Š)', 'ç©æ¨‚'],
                datasets: [{
                    data: [3200, 2500, 1200, 900],
                    backgroundColor: ['#A7F3D0', '#FDBA74', '#FDA4AF', '#93C5FD'],
                    borderWidth: 0,
                    hoverOffset: 10
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { font: { family: "'Zen Maru Gothic', sans-serif" } }
                    }
                }
            }
        });
    }

    renderDay(0);
</script>
</body>
</html>